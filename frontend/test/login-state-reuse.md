> ๐ Date: 2025-05-26

<br /> 

# ๐ Focus

Playwright์์ ์ธ์ ์คํ๋ฆฌ์ง๋ฅผ ํ์ฉํด ๋ก๊ทธ์ธ ์ํ๋ฅผ ์ฌ์ฌ์ฉํ๊ธฐ
(SNS ์์ ๋ก๊ทธ์ธ ํฌํจ)

<br /> 

# ๐ Learnings

> Playwright๋ ํ์คํธ๋ฅผ ์คํํ ๋๋ง๋ค ์ ๋ธ๋ผ์ฐ์ ์ปจํ์คํธ์์ ์์ <br /> 
> ์ด๋ ๋ก๊ทธ์ธ ์ํ๊ฐ ์์ง๋์ง ์์ ๋งค ํ์คํธ๋ง๋ค ๋ค์ ๋ก๊ทธ์ธํด์ผ ํ๋ ์ด์ ๋ฐ์ <br /> 
> ํนํ ์์ ๋ก๊ทธ์ธ์ ์๋ํ๊ฐ ์ด๋ต๊ณ ๋ก์ปฌ์์ ์ค๋ฅ๊ฐ ์ฆ๊ธฐ ๋๋ฌธ์ <br /> 
> ํ ๋ฒ ๋ก๊ทธ์ธํ ์ํ๋ฅผ ์์ฅํด ํ์คํธ์ ์ฌํ์ฉํ๋ค. 

<br /> 

## `storageState`

Playwright๋ ๋ก๊ทธ์ธ ํ์ ์ธ์ฆ ์ํ(์ธ์, ์ฟํค, localStorage ๋ฑ)๋ฅผ `.json` ํ์ผ๋ก ์์ฅํ๊ณ,
์ด ์ํ๋ฅผ ์ดํ ํ์คํธ์์ ์ฌ์ฌ์ฉํ ์ ์๋ค. 

<br /> 

## โ ์ค์ ํ๋ฆ

### 1๏ธโฃ ๋ก๊ทธ์ธ ์ํ ์์ฅ (Global Setup)

```ts
// global-setup.ts
import { chromium } from '@playwright/test';

async function globalSetup() {
  const browser = await chromium.launch();
  const page = await browser.newPage();

  await page.goto('https://your-app.com/login');

  // ๐ ์์ ๋ก๊ทธ์ธ ์ง์ ์ํ
  await page.click('text=์นด์นด์ค ๋ก๊ทธ์ธ');
  await page.fill('#email', 'your@email.com');
  await page.fill('#password', 'your_password');
  await page.click('button[type=submit]');

  // โ ๋ก๊ทธ์ธ ํ ์คํ๋ฆฌ์ง ์ํ ์์ฅ
  await page.context().storageState({ path: 'storageState.json' });
  await browser.close();
}

export default globalSetup;
```

> ์ค์๋ก ์นด์นด์ค/๊ตฌ๊ธ ๋ฑ OAuth ๋ก๊ทธ์ธ ๊ณผ์์ ๊ฑฐ์น๊ณ
> ๋ก๊ทธ์ธ ํ์ ์ฟํค/๋ก์ปฌ์คํ๋ฆฌ์ง ๋ฑ์ `storageState.json`์ ์์ฅ

<br /> 

### 2๏ธโฃ ์ค์ ํ์ผ์ ์์ฉ

```ts
// playwright.config.ts
import { defineConfig } from '@playwright/test';

export default defineConfig({
  globalSetup: require.resolve('./global-setup'),
  use: {
    storageState: 'storageState.json',
  },
});
```

* ์ดํ ํ์คํธ์์๋ `๋ก๊ทธ์ธ ์์ด ์๋์ผ๋ก ์ธ์ฆ๋ ์ํ`๋ก ์์

<br /> 

### 3๏ธโฃ ์ค์ ํ์คํธ ์์

```ts
import { test, expect } from '@playwright/test';

test('๋ก๊ทธ์ธ ํ ์๊ทผ ๊ฐ๋ฅํ ํ์ด์ง ํ์ธ', async ({ page }) => {
  await page.goto('https://your-app.com/dashboard');
  await expect(page.locator('text=๋ก๊ทธ์์')).toBeVisible(); // ๋ก๊ทธ์ธ๋ ์ํ
});
```

<br /> 

## โ ์ฅ์

| ํญ๋ชฉ   | ์ค๋ช                             |
| ---- | ------------------------------ |
| ์๋   | ๋งค๋ฒ ๋ก๊ทธ์ธํ๋ ์๊ฐ ์์ฝ (ํนํ ์์ ๋ก๊ทธ์ธ์ ๋๋ฆผ) |
| ์์์ฑ  | ๋ก๊ทธ์ธ ์คํจ๋ก ์ธํ ํ์คํธ ์คํจ ๋ฐฉ์ง           |
| ์์ง๋ณด์ | ๋ก๊ทธ์ธ ํ์คํธ๋ ๋ณ๋ ์ํ, ๊ฐ ํ์คํธ๋ ๋ชฉ์์ ์ง์ค  |

<br /> 

## ๐ง ์ค๋ฌด ํ

* `storageState.json`์ ๋ฏผ๊ฐ ์๋ณด๊ฐ ๋ด๊ธฐ๋ฏ๋ก **๋ฒ์๊ด๋ฆฌ(Git)์ ํฌํจ X**
* ์ฃผ๊ธฐ์์ผ๋ก ๋ก๊ทธ์ธ ์ํ๋ฅผ ์ฌ์์ฑ (`npm run auth:setup` ๋ฑ ์ปค๋งจ๋ ๊ตฌ์ฑ)
* SNS ๋ก๊ทธ์ธ์ 2๋จ๊ณ ์ธ์ฆ ๋ฑ์ผ๋ก ๋งํ ์ ์์ด **ํ์คํธ ์์ฉ ๊ณ์ ๊ถ์ฅ**

<br /> 

## โ ์์ฝ

| ํญ๋ชฉ | ์ค๋ช                                                               |
| -- | ---------------------------------------------------------------- |
| ๋ฌธ์ | ๋งค ํ์คํธ๋ง๋ค ๋ก๊ทธ์ธ ํ์, ํนํ ์์ ๋ก๊ทธ์ธ์ ์๋ํ ์ด๋ค์                               |
| ํด๊ฒฐ | ํ ๋ฒ ๋ก๊ทธ์ธ ํ `storageState` ์์ฅ โ ์ดํ ํ์คํธ ์ฌ์ฌ์ฉ                         |
| ๊ตฌ์ฑ | `global-setup.ts` + `storageState.json` + `playwright.config.ts` |
| ํ์ฉ | ๋ชจ๋ ํ์คํธ์์ ๋ก๊ทธ์ธ ๊ณผ์์ ์๋ตํ๊ณ ์ธ์ฆ๋ ์ํ๋ก ์์ ๊ฐ๋ฅ                              |
